<div class="question">
  <p>Creada por: <%= @question.user_name %></p>
  <h1><%= @question.title %></h1>
  <p><%= @question.content %></p>
</div>

<% @question.answers.each do |answer| %>
  <div class="answer">
    <p>Contestado por: <%= answer.user.name %></p>
    <p><%= answer.content %></p>
    <% if current_user.admin? || current_user == answer.user %>
      <%= button_to 'Eliminar Respuesta', question_answer_path(@question, answer), method: :delete, data: { confirm: '¿Estás seguro que deseas eliminar esta respuesta?' }, class: "delete-button" %>
    <% end %>
  </div>
<% end %>

<% if current_user.admin? %>
  <%= button_to 'Eliminar Pregunta', question_path(@question), method: :delete, data: { confirm: '¿Estás seguro que deseas eliminar esta pregunta?' }, class: "delete-button" %>
<% end %>

<%= form_with(model: [@question, @answer], url: question_answers_path(@question), local: true) do |form| %>
  <% if @answer.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@answer.errors.count, "error") %> prohibited this answer from being saved:</h2>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :respuesta %>
    <%= form.text_area :content %>
  </div>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>
